#!/bin/bash
#
# SessionStart hook for ManageSieveJ
# This hook runs when a new Claude Code session starts
# It verifies the development environment is properly configured

set -e

echo "ğŸš€ Initializing ManageSieveJ development environment..."

# Check Java version
echo "ğŸ“ Checking Java version..."
java -version 2>&1 | head -n 1

# Check Maven version
echo "ğŸ“ Checking Maven version..."
mvn --version | head -n 1

# Verify pom.xml exists
if [ ! -f "pom.xml" ]; then
    echo "âŒ Error: pom.xml not found!"
    exit 1
fi

echo "ğŸ“ Project: ManageSieveJ - ManageSieve Protocol Client for Java"
echo "ğŸ“ Build tool: Maven"
echo "ğŸ“ Test framework: TestNG"

# Check if target directory exists (previous build)
if [ -d "target" ]; then
    echo "ğŸ“¦ Previous build artifacts found in target/"
fi

echo "âœ… Development environment ready!"
echo ""
echo "Available commands:"
echo "  /build    - Build the project"
echo "  /test     - Run test suite"
echo "  /clean    - Clean build artifacts"
echo "  /package  - Create JAR package"
echo "  /coverage - Run tests with coverage"
echo "  /verify   - Full Maven verification"
